<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="WordSlide - Word Puzzle Game">
    <meta name="theme-color" content="#F5C139">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="WordSlide">
    <title>WordSlide - The Word Sliding Crossword</title>
    <link rel="manifest" href="manifest.json">
    <link rel="icon" type="image/png" href="img/favicon.png">
    <link rel="apple-touch-icon" href="img/wordslide-logo.png">
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.1.2"></script>
</head>
<body>
    <div class="container">
        <div class="completion-content">
            <a href="index.html" class="logo-link">
                <img src="img/home-page-logo.png" alt="WordSlide Logo" class="logo">
            </a>
            <h1 class="completion-title" style="margin-top: 40px;">
                Congratulations!
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" fill="var(--active-color)" viewBox="0 0 256 256" class="confetti-icon"><path d="M111.49,52.63a15.8,15.8,0,0,0-26,5.77L33,202.78A15.83,15.83,0,0,0,47.76,224a16,16,0,0,0,5.46-1l144.37-52.5a15.8,15.8,0,0,0,5.78-26ZM65.14,161.13l19.2-52.79,63.32,63.32-52.8,19.2ZM160,72a37.8,37.8,0,0,1,3.84-15.58C169.14,45.83,179.14,40,192,40c6.7,0,11-2.29,13.65-7.21A22,22,0,0,0,208,23.94,8,8,0,0,1,224,24c0,12.86-8.52,32-32,32-6.7,0-11,2.29-13.65,7.21A22,22,0,0,0,176,72.06,8,8,0,0,1,160,72ZM136,40V16a8,8,0,0,1,16,0V40a8,8,0,0,1-16,0Zm101.66,82.34a8,8,0,1,1-11.32,11.31l-16-16a8,8,0,0,1,11.32-11.32Zm4.87-42.75-24,8a8,8,0,0,1-5.06-15.18l24-8a8,8,0,0,1,5.06,15.18Z"></path></svg>
            </h1>
            <p class="completion-message">You completed today's puzzle<span id="tries-message"></span></p>
            
            <div class="completion-actions">
                <button class="btn-action btn-share" id="share-btn">
                    <span class="btn-label">Share results</span>
                </button>
                <button class="btn-action btn-copy" id="copy-btn">
                    <span class="btn-label">Copy</span>
                </button>
            </div>
        </div>
        <footer class="page-footer">
            Created by <a href="https://chipdoes.app" target="_blank" rel="noopener noreferrer">@Chip Rian</a>
        </footer>
    </div>

    <script>
        // Get and display reset count (tries)
        const resetCount = localStorage.getItem('completedResetCount');
        const triesMessage = document.getElementById('tries-message');
        let tries = 1;
        if (resetCount !== null) {
            tries = parseInt(resetCount, 10);
            triesMessage.textContent = ` in ${tries} ${tries === 1 ? 'try' : 'tries'}`;
        } else {
            triesMessage.textContent = ' in 1 try';
        }
        
        // Function to get share text
        function getShareText() {
            return `I have completed today's WordSlide puzzle in ${tries} ${tries === 1 ? 'try' : 'tries'} https://tedregon.github.io/wordslide.online/`;
        }
        
        // Share button - share to X/Twitter
        document.getElementById('share-btn').addEventListener('click', () => {
            const message = `I have completed today's WordSlide puzzle in ${tries} ${tries === 1 ? 'try' : 'tries'}`;
            const url = 'https://tedregon.github.io/wordslide.online/';
            const twitterUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(message)}&url=${encodeURIComponent(url)}`;
            window.open(twitterUrl, '_blank', 'width=550,height=420');
        });
        
        // Copy button - copy share text to clipboard
        document.getElementById('copy-btn').addEventListener('click', async () => {
            const shareText = getShareText();
            try {
                await navigator.clipboard.writeText(shareText);
                // Show feedback
                const copyBtn = document.getElementById('copy-btn');
                const originalText = copyBtn.querySelector('.btn-label').textContent;
                copyBtn.querySelector('.btn-label').textContent = 'Copied!';
                setTimeout(() => {
                    copyBtn.querySelector('.btn-label').textContent = originalText;
                }, 2000);
            } catch (err) {
                console.error('Failed to copy text:', err);
                // Fallback for older browsers
                const textArea = document.createElement('textarea');
                textArea.value = shareText;
                textArea.style.position = 'fixed';
                textArea.style.opacity = '0';
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    const copyBtn = document.getElementById('copy-btn');
                    const originalText = copyBtn.querySelector('.btn-label').textContent;
                    copyBtn.querySelector('.btn-label').textContent = 'Copied!';
                    setTimeout(() => {
                        copyBtn.querySelector('.btn-label').textContent = originalText;
                    }, 2000);
                } catch (fallbackErr) {
                    console.error('Fallback copy failed:', fallbackErr);
                }
                document.body.removeChild(textArea);
            }
        });
    </script>
</body>
</html>

